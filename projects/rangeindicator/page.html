<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Range Indicator</title>
    <link rel="icon" href="../../img/favicon.ico"><!--icon made with Magneto font-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../../css/projectstyle.css">
    <link rel="stylesheet" href="../../css/scrollbar.css">
    <link rel="stylesheet" href="../../css/copyright.css">
    <script src="../../js/jquery.js"></script>
    <script src="../../js/main.js"></script>
  </head>
  <body>
    <div class="wrapper">
      <div class="section">
        <h1>Tower Defense Turret Range Indicator</h1>
        <div class="sectiontext">
          <p>
            In this project I was tasked with creating a range indicator graphic for turrets in a tower defense game, called Forward Defense. You may check out my work in action and support the developers by purchasing the game on Steam:
          </p>
        </div>
        <div class="centeringdiv">
          <iframe src="https://store.steampowered.com/widget/1986940/" frameborder="0"  width="646" height="190"></iframe>
        </div>
        <div class="sectiontext">
          <p>
            Since the game already featured a similar graphic used for indicating valid areas to place turrets in, the style of the effect was already given. Other things to consider were layers on which the effect is projected onto, like terrain, and other layers such as buildings, which the effect ignores. The effect also needed to be able to show a variable number of turrets from 10s to 100s at any density.
            <br>
            <br>
            Considering all of these requirements I opted to use projectors, since they already have a layer system and are able to follow the curves of the map such as hills and riverbeds. The projector uses a custom shader, which processes a range map according to supplied material colors, and applies a simple 4-tap border. The range map is rendered in a similar fashion to how Unity renders shadows, the turrets render their ranges into a top-down camera. The challenge here is that if we render the whole map into a single texture, zoomed-in areas will look pixelated due to fixed RenderTexture resolution. To fix this I minimize the area which is rendered into this texture, I only render the area which is visible to the main camera. The top-down camera frustum is approximated using raycasts, as mountains make it impossible to calculate an exact size in a reasonable amount of compute time. I also apply a small margin of error.
            <br>
            <br>
            The end result of this system is merged, perfectly sharp turret range outlines at any zoom level, and at a low cost to performance.
          </p>
        </div>

        <div class="centeringdiv">
          <div class="flex-horizontal">
            <div class="project-image-container">
              <img src="./preview.png" class="project-image">
              <p class="image-caption">
                Final graphic
              </p>
            </div>
          </div>
        </div>

      </div>

      <footer>
        <div class="copyrightsymbol">©</div>
        <div class="copyrighttext"> 2023 <script>
        let currentYear = new Date().getFullYear();
      if(currentYear != 2023) document.write( "- " + currentYear); 
      </script> Péter Csaba Panyik | All Rights Reserved
      </div>
      </footer>

    </div>
    <script type="module" src="/src/projects/main.ts"></script>
  </body>
</html>
